<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ä»Šæ—¥æƒè¡— - VoteScope</title>
    <link rel="stylesheet" href="assets/css/app.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .route-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .route-handle {
            color: #ccc;
            padding: 8px;
        }
        .route-content {
            flex-grow: 1;
        }
    </style>
</head>
<body>
    <header class="topbar">
        <a href="00_home.html" class="topbar-brand"><i class="fas fa-chevron-left"></i> ä»Šæ—¥æƒè¡—åå–®</a>
    </header>

    <main class="container" id="route-list">
        <!-- æƒè¡—åå–® -->
    </main>

    <div class="bottom-actions">
        <button class="btn-mobile btn-primary btn-large" onclick="window.location.href='06_quick_update.html'">ğŸƒ é–‹å§‹æƒè¡— (é€²å…¥å¿«é€Ÿæ›´æ–°)</button>
    </div>

    <script src="assets/js/app.js"></script>
    <script>
        function renderRoute() {
            const data = VoteScope.getData();
            const routeIds = JSON.parse(localStorage.getItem('vs_route') || '[]');
            const container = document.getElementById('route-list');
            container.innerHTML = '';

            if (routeIds.length === 0) {
                container.innerHTML = `
                    <div class="text-center" style="padding: 40px 0;">
                        <i class="fas fa-walking" style="font-size: 3rem; color: #eee; margin-bottom: 16px;"></i>
                        <p style="color: #999;">å°šæœªåŠ å…¥ä»»ä½•åå–®<br>è«‹å¾ã€Œåå–®ã€æˆ–ã€Œåœ°åœ–ã€åŠ å…¥</p>
                        <a href="04_household_list.html" class="btn-mobile btn-neutral" style="width: auto; display: inline-flex;">å»åå–®çœ‹çœ‹</a>
                    </div>
                `;
                return;
            }

            const routePersons = data.persons.filter(p => routeIds.includes(p.id));

            routePersons.forEach((p, index) => {
                const item = document.createElement('div');
                item.className = 'app-card route-item';
                item.innerHTML = `
                    <div class="route-handle"><i class="fas fa-bars"></i></div>
                    <div class="route-content">
                        <div style="font-weight: bold;">${p.name}</div>
                        <div style="font-size: 0.85rem; color: #666;">${p.address}</div>
                    </div>
                    <button class="btn-mobile btn-danger" style="width: 44px; min-height: 44px; padding: 0;" onclick="removeFromRoute(${p.id})">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                container.appendChild(item);
            });
        }

        function removeFromRoute(id) {
            let rData = JSON.parse(localStorage.getItem('vs_route') || '[]');
            rData = rData.filter(rid => rid !== id);
            localStorage.setItem('vs_route', JSON.stringify(rData));
            renderRoute();
        }

        document.addEventListener('DOMContentLoaded', renderRoute);
    </script>
</body>
</html>

